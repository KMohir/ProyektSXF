# üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

## ‚úÖ –ß—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –ø—Ä–æ–µ–∫—Ç:

### 1. ‚úÖ credentials.json
**–ß—Ç–æ —ç—Ç–æ:** –ö–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ Google Sheets API –æ—Ç –≤–∞—à–µ–≥–æ Service Account

**–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏:**
- `client_email`: sxf-samarqand@data-centaur-466605-k7.iam.gserviceaccount.com
- `private_key`: –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `project_id`: data-centaur-466605-k7

**–í–∞–∂–Ω–æ:** –≠—Ç–æ—Ç email –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–µ–π Google —Ç–∞–±–ª–∏—Ü–µ!

### 2. ‚úÖ .env —Ñ–∞–π–ª
**–ß—Ç–æ —ç—Ç–æ:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞ —Å–æ –≤—Å–µ–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

**–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏:**

```env
# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
BOT_TOKEN=7997794894:AAFu6bJXanh9BQWStTt9ZuqxgCYlCY_oDlE

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ PostgreSQL
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=111
POSTGRES_DB=kapital_bot

# Google Sheets
GOOGLE_SHEETS_CREDENTIALS_FILE=credentials.json
GOOGLE_SHEETS_URL=https://docs.google.com/spreadsheets/d/1tISd6QbVU9bCx8pBed1w4izxDrnPhKc6WztTIJ7Kxf8/edit?gid=365492417#gid=365492417

# ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
ADMIN_IDS=5657091547,5048593195
```

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

### –®–∞–≥ 1: –î–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ Google —Ç–∞–±–ª–∏—Ü–µ

**–í–ê–ñ–ù–û!** –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à—É Google —Ç–∞–±–ª–∏—Ü—É –∏ –¥–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø –¥–ª—è:
```
sxf-samarqand@data-centaur-466605-k7.iam.gserviceaccount.com
```

**–ö–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É: https://docs.google.com/spreadsheets/d/1tISd6QbVU9bCx8pBed1w4izxDrnPhKc6WztTIJ7Kxf8/
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–∞" (Share)
3. –î–æ–±–∞–≤—å—Ç–µ email: `sxf-samarqand@data-centaur-466605-k7.iam.gserviceaccount.com`
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å: "–†–µ–¥–∞–∫—Ç–æ—Ä" (Editor)
5. –ù–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL

**Windows:**
1. –°–∫–∞—á–∞–π—Ç–µ —Å https://www.postgresql.org/download/windows/
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å –ø–∞—Ä–æ–ª–µ–º `111` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `postgres`
3. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `kapital_bot`

**Linux:**
```bash
sudo apt install postgresql postgresql-contrib
sudo -u postgres psql
CREATE DATABASE kapital_bot;
\q
```

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**Windows:**
```cmd
install.bat
```

**Linux:**
```bash
chmod +x install.sh
./install.sh
```

## üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

### Windows:
```cmd
run.bat
```

### Linux:
```bash
chmod +x run.sh
./run.sh
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Google —Ç–∞–±–ª–∏—Ü—ã

–í–∞—à–∞ —Ç–∞–±–ª–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å —Ç–∞–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

### –ö–∞–∂–¥—ã–π –ª–∏—Å—Ç = –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç

| A | B | C | D (–ó–∞–¥–∞—á–∏) | E (–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å) | F (–¢–µ–ª–µ—Ñ–æ–Ω) |
|---|---|---|------------|-----------------|-------------|
| ... | ... | ... | –ó–∞–¥–∞—á–∞ 1 | (–∑–∞–ø–æ–ª–Ω–∏—Ç –±–æ—Ç) | (–∑–∞–ø–æ–ª–Ω–∏—Ç –±–æ—Ç) |
| ... | ... | ... | –ó–∞–¥–∞—á–∞ 2 | (–∑–∞–ø–æ–ª–Ω–∏—Ç –±–æ—Ç) | (–∑–∞–ø–æ–ª–Ω–∏—Ç –±–æ—Ç) |
| ... | ... | ... | –ó–∞–¥–∞—á–∞ 3 | (–∑–∞–ø–æ–ª–Ω–∏—Ç –±–æ—Ç) | (–∑–∞–ø–æ–ª–Ω–∏—Ç –±–æ—Ç) |

**–í–∞–∂–Ω–æ:**
- –°—Ç–æ–ª–±–µ—Ü D - –Ω–∞–∑–≤–∞–Ω–∏—è –∑–∞–¥–∞—á (–±–æ—Ç —á–∏—Ç–∞–µ—Ç –æ—Ç—Å—é–¥–∞)
- –°—Ç–æ–ª–±–µ—Ü E - –∏–º—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è (–±–æ—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å—é–¥–∞)
- –°—Ç–æ–ª–±–µ—Ü F - —Ç–µ–ª–µ—Ñ–æ–Ω –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è (–±–æ—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å—é–¥–∞)
- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ - –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–±–æ—Ç –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç)

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
```bash
python utils/health_check.py
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```
‚úÖ Database OK - X users
‚úÖ Google Sheets OK - X projects
‚úÖ All systems operational
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–∞ –≤ Telegram

1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å (–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç)
4. –ù–∞–∂–º–∏—Ç–µ "üìã –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç"
5. –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–∞–∑–≤–∞–Ω–∏—è –ª–∏—Å—Ç–æ–≤ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã

## üë• –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã

–í .env —É–∫–∞–∑–∞–Ω—ã –¥–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
- `5657091547`
- `5048593195`

**–ß—Ç–æ –º–æ–≥—É—Ç –∞–¥–º–∏–Ω—ã:**
- ‚úÖ –û–¥–æ–±—Ä—è—Ç—å/–æ—Ç–∫–ª–æ–Ω—è—Ç—å –∑–∞–¥–∞—á–∏
- üìä –°–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- üìë –í–∏–¥–µ—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏
- üîî –ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö

**–ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å–≤–æ–π ID:**
1. –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É @userinfobot –≤ Telegram
2. –û–Ω –ø–æ–∫–∞–∂–µ—Ç –≤–∞—à ID
3. –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ ADMIN_IDS —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚ö†Ô∏è –í–ê–ñ–ù–û!

**–ù–ï –ø—É–±–ª–∏–∫—É–π—Ç–µ —ç—Ç–∏ —Ñ–∞–π–ª—ã:**
- `.env` - —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- `credentials.json` - —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á

–û–Ω–∏ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `.gitignore`

**–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω —É—Ç–µ–∫:**
1. –ó–∞–π–¥–∏—Ç–µ –∫ @BotFather
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/revoke`
3. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω
4. –û–±–Ω–æ–≤–∏—Ç–µ BOT_TOKEN –≤ .env

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "Database connection failed"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ PostgreSQL
# Windows:
services.msc  # –ù–∞–π–¥–∏—Ç–µ PostgreSQL

# Linux:
sudo systemctl status postgresql
sudo systemctl start postgresql
```

### –û—à–∏–±–∫–∞: "Google Sheets API error"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. credentials.json —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. Email –∏–∑ credentials.json –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ
3. URL —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
```

### –û—à–∏–±–∫–∞: "Bot token is invalid"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ BOT_TOKEN –≤ .env
# –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω —É @BotFather –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
```

## üìù –õ–æ–≥–∏

–í—Å–µ –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `bot.log`

**–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:**
```bash
# Windows:
type bot.log

# Linux:
tail -f bot.log
```

## üéØ –ì–æ—Ç–æ–≤–æ!

–ï—Å–ª–∏ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
1. ‚úÖ PostgreSQL –∑–∞–ø—É—â–µ–Ω
2. ‚úÖ credentials.json –Ω–∞ –º–µ—Å—Ç–µ
3. ‚úÖ Service Account –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ
4. ‚úÖ .env –∑–∞–ø–æ–ª–Ω–µ–Ω

–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –±–æ—Ç–∞ –∏ –æ–Ω –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å! üöÄ

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –õ–æ–≥–∏ –≤ `bot.log`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python utils/health_check.py`
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã